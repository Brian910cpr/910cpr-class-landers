<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CPR, First Aid, BLS, ACLS & PALS — Done Right and On Time | 910CPR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Live CPR/AED & First Aid classes in Wilmington & Burgaw. BLS, ACLS, PALS for healthcare; OSHA-acceptable workplace options; pediatric/family courses. Enroll online." />
  <link rel="canonical" href="https://www.910cpr.com/" />
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%232563eb'/%3E%3Ctext x='32' y='40' text-anchor='middle' font-size='28' fill='white' font-family='Arial, sans-serif'%3E9%3C/text%3E%3C/svg%3E">

  <!-- Schema -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"LocalBusiness",
    "name":"910CPR",
    "url":"https://www.910cpr.com/",
    "telephone":"+1-910-395-5193",
    "areaServed":["Wilmington NC","Burgaw NC"]
  }
  </script>

  <style>
    :root{
      --brand:#2563eb; --brand-600:#1d4ed8; --brand-50:#eef2ff;
      --accent:#ef4444; --bg:#f8fafc; --text:#0f172a; --muted:#64748b;
      --card:#ffffff; --line:#e5e7eb; --chip-bg:#f1f5f9; --chip-b:#e2e8f0;
      --ok-bg:#ecfdf5; --ok-b:#d1fae5;
    }
    :root[data-theme="dark"]{
      --bg:#0b1220; --text:#e5e7eb; --muted:#9aa4af; --card:#0f172a; --line:#1f2937;
      --chip-bg:#0b1220; --chip-b:#1f2937; --brand:#60a5fa; --brand-600:#3b82f6; --brand-50:#0b1220;
      --ok-bg:#052e1f; --ok-b:#064e3b;
    }
    html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    .wrap{max-width:1100px;margin:0 auto;padding:22px}
    a{color:inherit}
    .brandbar{display:flex;align-items:center;gap:12px;margin-bottom:10px}
    .logo{height:36px;width:auto;display:block}
    h1{margin:.25rem 0;font-size:clamp(22px,4vw,30px)}
    .sub{color:var(--muted);margin:.25rem 0 1rem}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0 18px}
    .chip,.chip-btn{display:inline-block;padding:7px 12px;border-radius:9999px;background:var(--chip-bg);border:1px solid var(--chip-b);text-decoration:none;color:inherit;font-weight:700;font-size:13px;cursor:pointer;user-select:none}
    .chip.brand{background:var(--brand-50);border-color:var(--brand-600);color:var(--brand-600)}
    .chip:hover,.chip-btn:hover{filter:brightness(.98)}
    .chip.call{background:#10b9811a;border-color:#10b98144}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .col-12{grid-column:span 12}.col-6{grid-column:span 6}.col-4{grid-column:span 4}.col-3{grid-column:span 3}
    @media(max-width:1020px){.col-6,.col-4,.col-3{grid-column:span 12}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:16px}
    .eyebrow{display:inline-flex;gap:6px;align-items:center;font-size:12px;padding:4px 8px;border-radius:9999px;border:1px solid var(--line);background:var(--bg);color:var(--muted)}
    .heart{color:var(--accent);font-weight:900}
    .card-title{margin:8px 0 6px;font-size:18px}
    .lede{color:#3f4753;margin:6px 0 16px;line-height:1.45}
    :root[data-theme="dark"] .lede{color:#bcc4ce}
    .pillbar{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .pill{display:inline-block;border:1px solid var(--brand-600);color:#fff;background:var(--brand-600);padding:8px 12px;border-radius:12px;text-decoration:none;font-weight:800;font-size:13px}
    .pill.alt{background:transparent;color:var(--brand-600)}
    .pill.ghost{background:transparent;border-color:var(--line);color:inherit}
    .next{margin:10px 0 6px;font-weight:800;font-size:13px}
    .timechips{display:flex;gap:8px;flex-wrap:wrap}
    .timechip{display:inline-block;border:1px solid var(--line);background:var(--bg);padding:6px 10px;border-radius:10px;font-size:13px;text-decoration:none}
    .section-title{margin:26px 0 10px;font-size:clamp(18px,3.4vw,24px)}
    .section-title>a{text-decoration:none}.section-title>a:hover{text-decoration:underline;text-underline-offset:.18em}
    .callout{margin-top:12px;padding:12px 14px;border-radius:12px}
    .callout.success{border:1px solid var(--ok-b);background:var(--ok-bg)}
    .micro{color:var(--muted);font-size:13px}
    footer{margin:30px 0 10px;color:var(--muted);font-size:13px}
    /* mini-3-col layout inside a card */
    .med-triad{display:grid;grid-template-columns:repeat(12,1fr);gap:12px;margin-top:10px}
    .tri{grid-column:span 4;background:var(--bg);border:1px solid var(--line);border-radius:10px;padding:10px}
    .tri h4{margin:0 0 8px;font-size:14px;letter-spacing:.2px}
    .tri .see{display:inline-block;margin-top:10px;font-weight:700;font-size:12px;text-decoration:none;color:var(--brand-600)}
    @media(max-width:1020px){.tri{grid-column:span 12}}
    /* Floating Call button (mobile only) */
    .call-fab{position:fixed;right:16px;bottom:16px;z-index:1000}
    .call-fab a{display:flex;align-items:center;gap:10px;text-decoration:none;background:var(--brand-600);color:#fff;padding:12px 14px;border-radius:9999px;border:1px solid rgba(0,0,0,.08);box-shadow:0 8px 24px rgba(0,0,0,.18);font-weight:800;font-size:14px;line-height:1;padding-bottom:calc(12px + env(safe-area-inset-bottom,0px));transform:translateY(6px);opacity:0;animation:fab-in .35s ease-out .2s forwards}
    :root[data-theme="dark"] .call-fab a{background:var(--brand);color:#0b1220}
    .call-fab svg{width:18px;height:18px;flex:0 0 18px;fill:currentColor}
    @media (min-width:840px){.call-fab{display:none}}
    @keyframes fab-in{to{transform:none;opacity:1}}
    @media (prefers-reduced-motion:reduce){.call-fab a{animation:none;transform:none;opacity:1}}
  </style>

  <!-- Theme toggle -->
  <script>
    (function(){
      const KEY="theme", root=document.documentElement;
      const initial=localStorage.getItem(KEY) || (matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");
      apply(initial);
      window.toggleTheme=()=>apply(root.dataset.theme==="dark"?"light":"dark");
      function apply(t){ root.dataset.theme=t; try{localStorage.setItem(KEY,t)}catch{} 
        const b=document.getElementById("theme-toggle"); if(b){ b.textContent=t==="dark"?"Light":"Dark"; b.setAttribute("aria-pressed",String(t==="dark"));}}
    })();
  </script>
</head>
<body>
  <div class="wrap">
    <!-- Brand row -->
    <div class="brandbar">
<img class="logo" src="data-assets/logo-910cpr.svg" onerror="this.onerror=null;this.src='images/910CPR_Fat.jpg'">
      <div>
        <h1>CPR, First Aid, BLS, ACLS &amp; PALS — Done Right and On Time</h1>
        <div class="sub">Wilmington • Burgaw • Camp Lejeune area. Same-day cards. We don’t cancel classes.</div>
      </div>
    </div>

    <!-- Global chips -->
    <div class="chips" aria-label="Quick links">
      <a class="chip brand" href="/courses/medical/">MEDICAL</a>
      <a class="chip" href="/courses/workplaces/">Industry &amp; Construction</a>
      <a class="chip" href="/courses/caregivers/">Child &amp; Senior Care</a>
      <a class="chip" href="/courses/uscg/">USCG / DAN (Maritime &amp; Diving)</a>
      <a class="chip" href="/courses/parents/">Parents &amp; Families</a>
      <a class="chip brand" href="/courses/workplaces/?q=HSI">HSI — BLS + First Aid</a>
      <a class="chip" href="/courses/medical/?city=Wilmington">Wilmington, NC</a>
      <a class="chip" href="/courses/medical/?city=Burgaw">Burgaw, NC</a>
      <a class="chip call" href="tel:+19103955193">Call / Text: (910) 395-5193</a>
      <button id="theme-toggle" class="chip" type="button" onclick="toggleTheme()" aria-pressed="false">Dark</button>
    </div>

    <!-- MEDICAL -->
    <h2 id="medical" class="section-title"><a href="/courses/medical/">For Medical Professionals</a></h2>
    <p class="lede"><strong>BLS, ACLS, and PALS</strong> for healthcare pros. Weekday &amp; evening options in Wilmington and Burgaw. AHA/ARC aligned, small groups, same-day eCards.</p>

    <div class="grid" role="region" aria-labelledby="medical">
      <!-- BLS -->
      <section class="card col-12">
        <span class="eyebrow"><span class="heart">❤</span> BLS for Providers</span>
        <h3 class="card-title">Basic Life Support (BLS)</h3>
        <p class="lede">Pick fast in-person or HeartCode + skills. Ideal for hospital staff, nurses, techs, and students.</p>
        <div class="med-triad">
          <div class="tri">
            <h4>In-Person Renewal</h4>
            <div class="timechips" id="times-bls-ren"></div>
            <a class="see" href="/courses/medical/?q=BLS%20Renewal">See all BLS Renewal →</a>
          </div>
          <div class="tri">
            <h4>In-Person Initial</h4>
            <div class="timechips" id="times-bls-init"></div>
            <a class="see" href="/courses/medical/?q=BLS%20Provider">See all BLS Initial →</a>
          </div>
          <div class="tri">
            <h4>HeartCode BLS</h4>
            <div class="timechips" id="times-bls-heart"></div>
            <a class="see" href="/courses/medical/?q=HeartCode%20BLS">See all HeartCode BLS →</a>
          </div>
        </div>
      </section>

      <!-- ACLS -->
      <section class="card col-12">
        <span class="eyebrow">Advanced Cardiovascular Life Support</span>
        <h3 class="card-title">ACLS</h3>
        <p class="lede">Initial or renewal—choose in-person or HeartCode + skills.</p>
        <div class="med-triad">
          <div class="tri">
            <h4>In-Person Renewal</h4>
            <div class="timechips" id="times-acls-ren"></div>
            <a class="see" href="/courses/medical/?q=ACLS%20Renewal">See all ACLS Renewal →</a>
          </div>
          <div class="tri">
            <h4>In-Person Initial</h4>
            <div class="timechips" id="times-acls-init"></div>
            <a class="see" href="/courses/medical/?q=ACLS%20Provider">See all ACLS Initial →</a>
          </div>
          <div class="tri">
            <h4>HeartCode ACLS</h4>
            <div class="timechips" id="times-acls-heart"></div>
            <a class="see" href="/courses/medical/?q=ACLS%20HeartCode">See all HeartCode ACLS →</a>
          </div>
        </div>
      </section>

      <!-- PALS -->
      <section class="card col-12">
        <span class="eyebrow">Pediatric Advanced Life Support</span>
        <h3 class="card-title">PALS</h3>
        <p class="lede">Initial or renewal—pediatric resuscitation credential your facility needs.</p>
        <div class="med-triad">
          <div class="tri">
            <h4>In-Person Renewal</h4>
            <div class="timechips" id="times-pals-ren"></div>
            <a class="see" href="/courses/medical/?q=PALS%20Renewal">See all PALS Renewal →</a>
          </div>
          <div class="tri">
            <h4>In-Person Initial</h4>
            <div class="timechips" id="times-pals-init"></div>
            <a class="see" href="/courses/medical/?q=PALS%20Provider">See all PALS Initial →</a>
          </div>
          <div class="tri">
            <h4>HeartCode PALS</h4>
            <div class="timechips" id="times-pals-heart"></div>
            <a class="see" href="/courses/medical/?q=PALS%20HeartCode">See all HeartCode PALS →</a>
          </div>
        </div>
      </section>
    </div>

    <!-- HSI blended callout -->
    <section class="card" style="margin-top:16px">
      <span class="eyebrow">Healthcare + Workplace Hybrid</span>
      <h3 class="card-title">BLS &amp; First Aid — Online + Skills (HSI)</h3>
      <p class="lede">Cover both BLS and First Aid with a blended path that fits real schedules. Popular for cross-role staff.</p>
      <div class="pillbar"><a class="pill alt" href="/courses/workplaces/?q=HSI">HSI — See Times</a></div>
      <div class="callout success">
        <strong>Great for Autism centers:</strong> different payers may require <em>BLS</em> or <em>First Aid</em>. This HSI blended class covers <em>both</em> in one session—so you have <strong>one registration</strong> and <strong>one digital certification record</strong> for credentialing or audit.
        <ul style="margin:10px 0 0 18px;">
          <li>Online theory + short skills = minimal downtime</li>
          <li>OSHA-acceptable First Aid with healthcare-grade BLS content</li>
          <li>Works across mixed roles (RBTs, BCBAs, therapists, admin)</li>
        </ul>
        <div class="micro"><em>Tip:</em> Acceptance can vary by payer/employer—bring your policy language and we’ll help match the right option.</div>
      </div>
    </section>

    <!-- WORKPLACES -->
    <h2 id="workplaces" class="section-title" style="margin-top:26px">
      <a href="/courses/workplaces/">For Workplaces (OSHA-Acceptable)</a>
    </h2>
    <p class="lede">OSHA-friendly <strong>CPR/AED &amp; First Aid</strong> for crews and teams. Heartsaver &amp; HSI options, on-site or at our classrooms. Flexible schedules and group rates.</p>

    <div class="grid" role="region" aria-labelledby="workplaces">
      <!-- Industry & Construction -->
      <div class="col-3">
        <h3 class="card-title">Industry &amp; Construction</h3>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA)</span>
          <h4 class="card-title">First Aid / CPR / AED — In Person</h4>
          <p class="lede">Practical, on-site friendly course that ticks OSHA compliance boxes.</p>
          <div class="pillbar"><a class="pill" href="/courses/workplaces/?q=Heartsaver">AHA — See Times</a></div>
        </section>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA) — Blended</span>
          <h4 class="card-title">First Aid / CPR / AED — Online + Skills</h4>
          <p class="lede">Fast blended format; same OSHA acceptance.</p>
          <div class="pillbar"><a class="pill alt" href="/courses/workplaces/?q=Heartsaver%20Blended">AHA — See Times</a></div>
        </section>
        <section class="card">
          <span class="eyebrow">Workforce Safety</span>
          <h4 class="card-title">OSHA 10 / OSHA 30</h4>
          <p class="lede">Entry-level and supervisor credentials. Online options (English/Spanish). Construction or General Industry.</p>
          <div class="pillbar">
            <a class="pill ghost" href="/courses/workplaces/?q=OSHA%2010">OSHA 10 — Info</a>
            <a class="pill ghost" href="/courses/workplaces/?q=OSHA%2030">OSHA 30 — Info</a>
            <a class="pill" href="tel:+19103955193">Call for details</a>
          </div>
        </section>
      </div>

      <!-- Child & Senior Care -->
      <div class="col-3">
        <h3 class="card-title">Child &amp; Senior Care</h3>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA)</span>
          <h4 class="card-title">First Aid / CPR / AED — In Person</h4>
          <p class="lede">Scenario-based training for childcare, schools, and elder-care teams.</p>
          <div class="pillbar"><a class="pill" href="/courses/workplaces/?q=Heartsaver">AHA — See Times</a></div>
        </section>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA) — Blended</span>
          <h4 class="card-title">First Aid / CPR / AED — Online + Skills</h4>
          <p class="lede">Blended format reduces downtime while meeting program requirements.</p>
          <div class="pillbar"><a class="pill alt" href="/courses/workplaces/?q=Heartsaver%20Blended">AHA — See Times</a></div>
        </section>
        <!-- HSI BLS/FA with live times -->
        <section class="card">
          <span class="eyebrow">HSI (blended)</span>
          <h4 class="card-title">BLS &amp; First Aid — Online + Skills</h4>
          <p class="lede">Covers BLS + First Aid in one session—one registration & one digital record.</p>
          <div class="pillbar"><a class="pill alt" href="/courses/workplaces/?q=HSI">HSI — See Times</a></div>
          <div class="next">Next sessions</div>
          <div class="timechips" id="hsi-list" aria-live="polite"></div>
        </section>
      </div>

      <!-- USCG / DAN -->
      <div class="col-3">
        <h3 class="card-title">USCG / DAN (Maritime &amp; Diving)</h3>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA)</span>
          <h4 class="card-title">First Aid / CPR / AED — In Person</h4>
          <p class="lede">On-deck readiness with practical, scenario-based training.</p>
          <div class="pillbar"><a class="pill" href="/courses/workplaces/?q=Heartsaver">AHA — See Times</a></div>
        </section>
        <section class="card">
          <span class="eyebrow">Heartsaver (AHA) — Blended</span>
          <h4 class="card-title">First Aid / CPR / AED — Online + Skills</h4>
          <p class="lede">Great for rotating watches and irregular schedules.</p>
          <div class="pillbar"><a class="pill alt" href="/courses/workplaces/?q=Heartsaver%20Blended">AHA — See Times</a></div>
        </section>
      </div>

      <!-- Dates panel (AHA only) -->
      <aside class="col-3">
        <section class="card" aria-labelledby="wk-next">
          <h3 id="wk-next" class="card-title">Next workplace dates</h3>
          <div class="eyebrow" style="margin:6px 0 8px">CPR/AED + First Aid (AHA)</div>
          <div class="timechips" id="wk-aha-list" aria-live="polite"></div>
          <div class="pillbar">
            <a class="chip brand" href="/courses/workplaces/?q=Heartsaver&city=Wilmington">See all — Wilmington</a>
            <a class="chip brand" href="/courses/workplaces/?q=Heartsaver&city=Burgaw">See all — Burgaw</a>
          </div>
        </section>
      </aside>
    </div>

    <!-- PARENTS / FAMILY & FRIENDS -->
    <h2 id="families" class="section-title" style="margin-top:26px">
      <a href="/courses/parents/">For Parents &amp; Families</a>
    </h2>
    <div class="grid">
      <section class="card col-12">
        <span class="eyebrow"><span class="heart">❤</span> Family &amp; Friends CPR</span>
        <h3 class="card-title">Hands-on CPR/AED with pediatric emphasis</h3>
        <p class="lede">Great for new parents and grandparents. Friendly instruction, practical scenarios, and take-home confidence. No prior experience needed.</p>
        <div class="pillbar">
          <a class="pill" href="/courses/parents/">See Times</a>
          <a class="pill ghost" href="/courses/parents/?city=Wilmington">Wilmington</a>
          <a class="pill ghost" href="/courses/parents/?city=Burgaw">Burgaw</a>
        </div>
      </section>
    </div>

    <footer>© 910CPR — Live schedule pulls from HOVN. Questions? <a href="tel:+19103955193">Call or text (910) 395-5193</a>.</footer>
  </div>

  <!-- Floating "Call Now" button -->
  <div class="call-fab" aria-label="Call 910-395-5193">
    <a href="tel:+19103955193" id="fab-call">
      <svg viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.02-.24c1.12.37 2.33.57 3.57.57a1 1 0 011 1V21a1 1 0 01-1 1C10.4 22 2 13.6 2 3a1 1 0 011-1h3.5a1 1 0 011 1c0 1.24.2 2.45.57 3.57a1 1 0 01-.24 1.02l-2.2 2.2z"/>
      </svg>
      <span>Call (910) 395-5193</span>
    </a>
  </div>

  <!-- Schedule script (single source of truth) -->
  <script id="910cpr-schedule" defer>
(() => {
  // -------- Paths (fix the 404) --------
  // Use a RELATIVE path so it works from subfolders (GitHub Pages, previews, etc.)
  const FEED_CANDIDATES = [
    "periscope_full.json",                     // same folder as index.html
    "./periscope_full.json",
    // Final fallback: try absolute (works when deployed at domain root)
    "/periscope_full.json"
  ];

  // Try candidates until one loads
  async function loadFeed() {
    for (const u of FEED_CANDIDATES) {
      try {
        const r = await fetch(u, { cache: "no-store" });
        if (!r.ok) throw new Error(`HTTP ${r.status}`);
        const json = await r.json();
        console.info("[910CPR] Loaded feed:", u, `(${json.length} items)`);
        return json;
      } catch (e) {
        console.warn("[910CPR] Feed failed:", u, e.message || e);
      }
    }
    throw new Error("All feed locations failed (404).");
  }

  const U = s => (s||"").toUpperCase();
  const TXT = it => `${it.title||""} ${it.course||""} ${it.certification||""} ${it.agency||""} ${it.format||""}`;

  // Robust date parser: ISO, "YYYY-MM-DD HH:MM", or "YYYY-MM-DD h:mm AM/PM TZ"
  function parseISO(s){
    if(!s) return null;
    const raw = String(s).trim();
    const d0 = new Date(raw); if(!isNaN(d0)) return d0;
    if (/^\d{4}-\d{2}-\d{2}\s+\d{2}:\d{2}$/.test(raw)) {
      const d1 = new Date(raw.replace(" ","T")+":00"); if(!isNaN(d1)) return d1;
    }
    const m = raw.match(/^(\d{4}-\d{2}-\d{2})\s+(\d{1,2}):(\d{2})\s*([AP]M)\s*([A-Z]{2,4})?$/i);
    if (m) {
      let [, ymd, hh, mm, ap, tz] = m;
      let H = parseInt(hh,10);
      if (ap.toUpperCase()==="PM" && H !== 12) H += 12;
      if (ap.toUpperCase()==="AM" && H === 12) H = 0;
      const tzMap = { EDT:"-04:00", EST:"-05:00", CDT:"-05:00", CST:"-06:00", PDT:"-07:00", PST:"-08:00" };
      const offset = tz && tzMap[tz.toUpperCase()] ? tzMap[tz.toUpperCase()] : "";
      const iso = `${ymd}T${String(H).padStart(2,"0")}:${mm}:00${offset}`;
      const d2 = new Date(iso); if(!isNaN(d2)) return d2;
    }
    const fb = new Date(raw.replace(" ","T").replace(/T(\d{2}:\d{2})(?!:)/,"T$1:00"));
    return isNaN(fb) ? null : fb;
  }

  function chipText(it){
    if (it.label) return it.label;
    const d = parseISO(it.start);
    if(!d) return (it.start||"") + (it.city?(" — "+it.city):"");
    const mo = d.toLocaleString(undefined,{month:"short"});
    const day = String(d.getDate()).padStart(2,"0");
    let h=d.getHours(), m=d.getMinutes(), ap=h>=12?"p":"a"; h=h%12||12;
    const hm = m ? `${h}:${String(m).padStart(2,"0")}${ap}` : `${h}${ap}`;
    return `${mo} ${day}, ${hm} — ${it.city||""}`;
  }

function buildSessionHref(it){
  // 1) direct URL if present
  if (it.url) return it.url;

  // 2) direct registration link if present (various possible keys)
  const reg = it.registration || it.reg_link || it.registration_link || "";
  if (reg) return reg;

  // 3) derive a session page path: /classes/YYYY-MM-DD_HH-MM_ID_City.html
  const d = parseISO(it.start);
  const sid = it.id || it.session_id || it.hovn_id;
  if (d && sid){
    const y  = d.getFullYear();
    const mo = String(d.getMonth()+1).padStart(2,'0');
    const da = String(d.getDate()).padStart(2,'0');
    const hh = String(d.getHours()).padStart(2,'0');
    const mm = String(d.getMinutes()).padStart(2,'0');
    const city = String(it.city || it.location || "")
      .replace(/[^A-Za-z0-9]+/g,'-')
      .replace(/^-+|-+$/g,'');
    return `/classes/${y}-${mo}-${da}_${hh}-${mm}_${sid}_${city}.html`;
  }

  // 4) last resort
  return '/courses/medical/';
}


  // Seed placeholders so UI isn’t blank
  [
    "times-bls-ren","times-bls-init","times-bls-heart",
    "times-acls-ren","times-acls-init","times-acls-heart",
    "times-pals-ren","times-pals-init","times-pals-heart",
    "wk-aha-list","hsi-list"
  ].forEach(id => setChips(id, []));

  async function upcoming(filter, limit=6){
    if (!window.__FEED__) window.__FEED__ = await loadFeed();
    const now = new Date();
    return window.__FEED__
      .map(x => ({...x, _d: parseISO(x.start)}))
      .filter(x => x._d && x._d >= now)
      .filter(filter)
      .sort((a,b)=>a._d - b._d)
      .slice(0,limit);
  }

  // -------- MEDICAL triads --------
  const familyFrom = it => {
    const t = U(TXT(it));
    if (/(^|[^A-Z])BLS([^A-Z]|$)|BASIC\s+LIFE\s+SUPPORT/.test(t)) return "BLS";
    if (/(^|[^A-Z])ACLS([^A-Z]|$)|ADVANCED\s+CARDIO/.test(t))     return "ACLS";
    if (/(^|[^A-Z])PALS([^A-Z]|$)|PEDIATRIC\s+ADVANCED/.test(t))  return "PALS";
    return U(it.course_family||"") || null;
  };
  const isHeart    = it => /HEART\s*CODE|HEARTCODE|ONLINE.*SKILLS|SKILLS\s*ASSESSMENT/i.test(TXT(it));
  const isRenew    = it => /\bRENEW(AL)?\b|RECERT|UPDATE\b/i.test(TXT(it));
  const isInPerson = it => /IN\s*PERSON|CLASSROOM|INSTRUCTOR[-\s]?LED/i.test(TXT(it)) && !isHeart(it);

  const tri = fam => ({
    ren:   it => familyFrom(it)===fam && isRenew(it)        && !isHeart(it),
    init:  it => familyFrom(it)===fam && !isRenew(it)       && isInPerson(it),
    heart: it => familyFrom(it)===fam && isHeart(it),
  });

  const BLS = tri("BLS"), ACLS = tri("ACLS"), PALS = tri("PALS");
  const LIM_TRIAD = 3, LIM_WORK = 12;

  Promise.all([
    upcoming(BLS.ren,   LIM_TRIAD).then(v => setChips("times-bls-ren",   v)),
    upcoming(BLS.init,  LIM_TRIAD).then(v => setChips("times-bls-init",  v)),
    upcoming(BLS.heart, LIM_TRIAD).then(v => setChips("times-bls-heart", v)),
    upcoming(ACLS.ren,  LIM_TRIAD).then(v => setChips("times-acls-ren",  v)),
    upcoming(ACLS.init, LIM_TRIAD).then(v => setChips("times-acls-init", v)),
    upcoming(ACLS.heart,LIM_TRIAD).then(v => setChips("times-acls-heart",v)),
    upcoming(PALS.ren,  LIM_TRIAD).then(v => setChips("times-pals-ren",  v)),
    upcoming(PALS.init, LIM_TRIAD).then(v => setChips("times-pals-init", v)),
    upcoming(PALS.heart,LIM_TRIAD).then(v => setChips("times-pals-heart",v)),
    // Workplace
    upcoming(it => /FIRST\s*AID|HEARTSAVER|WORKPLACE|CPR\s*\/?\s*AED/i.test(TXT(it)) && /(^|[^A-Z])AHA([^A-Z]|$)|HEARTSAVER/i.test(TXT(it)), LIM_WORK)
      .then(v => setChips("wk-aha-list", v)),
    upcoming(it => /FIRST\s*AID|WORKPLACE|CPR\s*\/?\s*AED/i.test(TXT(it)) && /(^|[^A-Z])HSI([^A-Z]|$)|HEALTH\s*&\s*SAFETY\s*INSTITUTE/i.test(TXT(it)), LIM_WORK)
      .then(v => setChips("hsi-list", v)),
  ]).catch(err => {
    console.error("[910CPR] schedule init failed:", err);
    // show a clearer message when feed is missing
    ["times-bls-ren","times-bls-init","times-bls-heart",
     "times-acls-ren","times-acls-init","times-acls-heart",
     "times-pals-ren","times-pals-init","times-pals-heart",
     "wk-aha-list","hsi-list"
    ].forEach(id => {
      const el = document.getElementById(id);
      if (el) el.innerHTML = '<span class="micro">Schedule temporarily unavailable.</span>';
    });
  });

  // Tiny debugger you can run in the console:
  window.__debug_med = async () => {
    const feed = await (window.__FEED__ ? Promise.resolve(window.__FEED__) : loadFeed());
    console.log("feed items:", feed.length);
    return feed;
  };
})();
</script>

  <!-- Track tel: clicks -->
  <script>
    document.querySelectorAll('a[href^="tel:"]').forEach(a=>{
      a.addEventListener('click', ()=>{
        try{
          if (window.gtag) gtag('event','click_phone',{event_category:'engagement',event_label:a.id||'tel_link',value:'910-395-5193'});
          if (window.dataLayer) window.dataLayer.push({event:'click_phone', phone:'910-395-5193', placement:a.id||'tel_link'});
        }catch(e){}
      });
    });
  </script>
</body>
</html>
