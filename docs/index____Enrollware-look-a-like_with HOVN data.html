<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <title>910CPR | Class Schedule</title> <meta name="viewport" content="width=device-width, initial-scale=1"> <style> :root { --brand:#005184; --aha:#bc2228; --pals:#594982; --gray:#929597; } body { font-family: system-ui, Arial, sans-serif; margin:0; background:#f8f9fa; color:#222; } header { background:#fff; border-bottom:1px solid #e5e7eb; } .wrap { max-width:1100px; margin:0 auto; padding:16px; } .topbar { display:flex; align-items:center; gap:16px; justify-content:space-between; } .brand { display:flex; align-items:center; gap:12px; } .brand img { height:44px; } .cta a { margin-left:12px; text-decoration:none; } h1 { margin:16px 0 6px; font-size:28px; } .muted { color:#555; font-style:italic; } .chips { display:grid; grid-template-columns:repeat(auto-fill,minmax(230px,1fr)); gap:10px; margin:18px 0 8px; } .chip { display:block; padding:14px 10px; text-align:center; color:#fff; border-radius:10px; text-decoration:none; font-size:16px; } .chip.brand { background:var(--brand); } .chip.aha { background:var(--aha); } .chip.pals { background:var(--pals); } .chip.gray { background:var(--gray); } .filters { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:16px 0; } .filters input, .filters select { padding:10px 12px; border:1px solid #d1d5db; border-radius:8px; background:#fff; font-size:15px; } .list { margin:8px 0 40px; } .panel { background:#fff; border:1px solid #e5e7eb; border-radius:12px; margin:10px 0; overflow:hidden; } .row { display:flex; justify-content:space-between; align-items:center; padding:14px 16px; cursor:pointer; } .row:hover { background:#f3f4f6; } .title { font-weight:600; } .meta { color:#555; font-size:14px; } .body { display:none; border-top:1px solid #e5e7eb; padding:14px 16px; } .btn { display:inline-block; text-decoration:none; padding:10px 14px; border-radius:10px; border:1px solid #0f172a; } .btn.primary { background:#0f172a; color:#fff; } .footer { text-align:center; color:#555; margin:24px 0 40px; } a { color:#0f172a; } .note { font-size:13px; color:#6b7280; } .logos { display:flex; gap:10px; align-items:center; } .logos img { height:30px; } @media (max-width:720px){ .filters { grid-template-columns:1fr; } } </style> </head> <body> <header> <div class="wrap topbar"> <div class="brand"> <!-- Optional logo --> <!-- <img src="images/910CPR_wave.jpg" alt="910CPR"> --> <div> <div style="font-size:20px;font-weight:700;">910CPR</div> <div class="note">BLS, ACLS, PALS, Heartsaver, HSI</div> </div> </div> <div class="logos"> <!-- Optional association logos --> <!-- <img src="images/aha.png" alt="AHA"><img src="images/arc.png" alt="ARC"><img src="images/hsi.png" alt="HSI"> --> </div> </div> </header> <main class="wrap"> <h1>Class Schedule</h1> <div class="muted">Questions? Text or call 910-395-5193. “We may only answer 8–8; we’ll hold a class any time: 24 hours.”</div> <div id="chips" class="chips"></div> <div class="filters"> <input id="q" type="search" placeholder="Search classes... (course, city, instructor)"> <select id="loc"></select> </div> <div class="filters"> <select id="course"></select> <a class="btn" id="openHOVN" href="https://www.hovn.app/910cpr/courses" target="_blank" rel="noopener">Open in New Tab (full catalog)</a> </div> <div id="list" class="list" aria-live="polite"></div> <div class="footer"> Powered by a static dataset (HOVN) and client-side filtering. All registrations go to HOVN. </div> </main> <script> const DATA_URL = 'data/sessions.json'; // put your generated file here // Addresses we may show in full (others will display City, State only) const ADDRESS_WHITELIST = [ '325 Sound Rd', '111 S Wright St', '115-3 Hinton Ave', '4018 Shipyard Blvd', '809 Gum Branch Rd', '4902 Merlot Ct' ]; let SESSIONS = []; let FILTERED = []; const els = { q: document.getElementById('q'), loc: document.getElementById('loc'), course: document.getElementById('course'), list: document.getElementById('list'), chips: document.getElementById('chips') }; function fmtDateRange(sIso, eIso) { const s = new Date(sIso), e = new Date(eIso || sIso); const sameDay = s.toDateString() === e.toDateString(); const date = s.toLocaleDateString('en-US', { weekday:'short', month:'short', day:'numeric', year:'numeric' }); const st = s.toLocaleTimeString([], { hour:'numeric', minute:'2-digit' }); const et = e.toLocaleTimeString([], { hour:'numeric', minute:'2-digit' }); return sameDay ? `${date} • ${st}–${et}` : `${date} ${st} → ${e.toLocaleDateString()} ${et}`; } function allowFullAddress(locationName='') { return ADDRESS_WHITELIST.some(x => locationName.includes(x)); } function safeLocation(item) { if (allowFullAddress(item.location_name || item.location || '')) return item.location_name || item.location || ''; const city = item.city || (item.location_name || '').split(',')[0] || ''; const state = item.state || 'NC'; return (city && state) ? `${city}, ${state}` : (item.location_name || item.location || ''); } function unique(list, key) { return Array.from(new Map(list.map(x => [x[key], x])).values()); } function buildSelectOptions() { // Locations const locs = unique(SESSIONS.map(s => ({ id: s.location_id || (s.location_name || s.location || ''), name: safeLocation(s) })), 'id').sort((a,b)=> a.name.localeCompare(b.name)); els.loc.innerHTML = ['<option value="">All Locations</option>'] .concat(locs.map(l=>`<option value="${String(l.id)}">${l.name}</option>`)).join(''); // Courses const courses = unique(SESSIONS.map(s => ({ id: String(s.course_id || s.course || s.course_code || s.course_name), name: s.course_name || s.course || s.title || `Course ${s.course_id}` })), 'id').sort((a,b)=> a.name.localeCompare(b.name)); els.course.innerHTML = ['<option value="">All Courses</option>'] .concat(courses.map(c=>`<option value="${c.id}">${c.name}</option>`)).join(''); // Chips (most frequent 6 courses) const freq = {}; for (const s of SESSIONS) { const id = String(s.course_id || s.course || s.course_code || s.course_name); freq[id] = (freq[id] || 0) + 1; } const top = Object.entries(freq).sort((a,b)=>b[1]-a[1]).slice(0,6).map(([id])=>id); els.chips.innerHTML = top.map((id,i)=>{ const name = (SESSIONS.find(s => String(s.course_id || s.course || s.course_code || s.course_name)===id)?.course_name) || `Course ${id}`; const cls = i===0?'brand':(name.includes('ACLS')?'aha':(name.includes('PALS')?'pals':'gray')); return `<a class="chip ${cls}" href="#ct${id}" data-ct="${id}">${name}</a>`; }).join(''); } function render(list) { if (!list.length) { els.list.innerHTML = '<div class="note">No classes match your filters.</div>'; return; } els.list.innerHTML = list.map(item=>{ const cid = String(item.course_id || item.course || item.course_code || item.course_name); const course = item.course_name || item.course || item.title || `Course ${cid}`; const when = fmtDateRange(item.start || item.start_iso || item.start_time, item.end || item.end_iso || item.end_time); const loc = safeLocation(item); const price = (item.price!=null && item.price!=='') ? ` • $${Number(item.price).toFixed(0)}` : ''; const seats = (item.seats_remaining!=null) ? ` • ${item.seats_remaining} seats left` : ''; const reg = item.register_url || item.enroll_url || item.url || ''; const regHref = reg && reg.startsWith('http') ? reg : `https://www.hovn.app/910cpr/enroll?id=${encodeURIComponent(item.session_id||'')}`; return ` <section class="panel" value="${course.toLowerCase()} ${loc.toLowerCase()} ${when.toLowerCase()}" data-cid="${cid}"> <a name="ct${cid}"></a> <div class="row" onclick="this.nextElementSibling.style.display=this.nextElementSibling.style.display==='block'?'none':'block'"> <div> <div class="title">${course}</div> <div class="meta">${when} • ${loc}${price}${seats}</div> </div> <div>▼</div> </div> <div class="body"> <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;"> <a class="btn primary" target="_blank" rel="noopener" href="${regHref}">Register</a> <span class="note">All registrations handled by HOVN.</span> </div> </div> </section>`; }).join(''); } function applyFilters(pushHash=true) { const q = els.q.value.trim().toLowerCase(); const loc = els.loc.value; const crs = els.course.value; FILTERED = SESSIONS.filter(s=>{ const cid = String(s.course_id || s.course || s.course_code || s.course_name); const course = (s.course_name || s.course || s.title || '').toLowerCase(); const locId = s.location_id || s.location_name || s.location || ''; const hay = (course + ' ' + (s.location_name||s.location||'') + ' ' + (s.city||'') + ' ' + (s.state||'')).toLowerCase(); if (loc && String(locId)!==String(loc)) return false; if (crs && String(cid)!==String(crs)) return false; if (q && !hay.includes(q)) return false; return true; }).sort((a,b)=> new Date(a.start||a.start_iso||a.start_time) - new Date(b.start||b.start_iso||b.start_time)); render(FILTERED); // Optional: update hash for deep links when a course is selected if (pushHash && crs) location.hash = 'ct'+crs; } function initHashDeepLink() { const h = location.hash.replace('#',''); if (h.startsWith('ct')) { const id = h.slice(2); els.course.value = id; } } function hydrateSelectFromURL() { const p = new URLSearchParams(location.search); if (p.get('q')) els.q.value = p.get('q'); if (p.get('loc')) els.loc.value = p.get('loc'); if (p.get('course')) els.course.value = p.get('course'); } function attachEvents() { els.q.addEventListener('input', ()=>applyFilters(false)); els.loc.addEventListener('change', ()=>applyFilters()); els.course.addEventListener('change', ()=>applyFilters()); // Chip clicks -> set course select els.chips.addEventListener('click', (e)=>{ const a = e.target.closest('a[data-ct]'); if (!a) return; e.preventDefault(); const id = a.getAttribute('data-ct'); els.course.value = id; applyFilters(); // scroll to the first matching panel const first = document.querySelector(`.panel[data-cid="${CSS.escape(id)}"]`); if (first) first.scrollIntoView({behavior:'smooth', block:'start'}); history.replaceState(null,'','#ct'+id); }); } async function boot() { const res = await fetch(DATA_URL, {cache:'no-store'}); SESSIONS = await res.json(); // normalize a couple of fields if missing SESSIONS.forEach(s=>{ if (!s.course_name && s.course) s.course_name = s.course; if (!s.location_name && s.location) s.location_name = s.location; }); buildSelectOptions(); hydrateSelectFromURL(); initHashDeepLink(); attachEvents(); applyFilters(false); } boot(); </script> </body> </html>